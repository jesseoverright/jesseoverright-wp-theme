/*! jesse-overright 20-05-2014 minified scripts */
function portfolio_parallax(a,b){parseInt(jQuery("#portfolio-item-content article").css("margin-top"))>0&&jQuery(window).scrollTop()<=jQuery("#portfolio-item-content article").offset().top&&jQuery(window).scrollTop()+jQuery(window).height()<=jQuery("#portfolio-item-content article").offset().top+jQuery("#portfolio-item-content article").height()&&b-1.35*jQuery(window).scrollTop()>0&&jQuery(window).width()>1024&&(jQuery("#portfolio-item-content article").css("margin-top",b-1.25*jQuery(window).scrollTop()-175),opacity=jQuery(window).scrollTop()/(b/2),opacity>=1?jQuery("#portfolio-item-content").css("background","none"):jQuery("#portfolio-item-content").css({"background-image":"linear-gradient(rgba(221,221,221,"+opacity+"),rgba(221,221,221,"+opacity+")), "+a,"background-repeat":"no-repeat","background-size":"100% auto"}))}function enable_mini_menu(){var a=jQuery(".navigation").height();scroll_limit=jQuery(window).width()<=600?jQuery(".navigation").outerHeight()+jQuery(".site-header").outerHeight()+jQuery("#wpadminbar").outerHeight()-8:jQuery(".site-header").outerHeight()-8,jQuery(window).scrollTop()>=scroll_limit?(jQuery(".site-header").css("margin-bottom",a+15),jQuery(".navigation").addClass("mini-nav")):(jQuery(".site-header").css("margin-bottom","inherit"),jQuery(".navigation").removeClass("mini-nav"))}var app=app||{};!function(){"use strict";app.Portfolio=Backbone.Model.extend({defaults:{id:"",title:"",content:""}})}();var app=app||{};!function(){"use strict";app.Post=Backbone.Model.extend({defaults:{id:"",title:"",content:"",type:"post",featured_image:{source:""}}})}();var app=app||{};!function(a){"use strict";app.View=Backbone.View.extend({el:function(){return document.getElementById("backbone")},currentViews:{},events:{"click .menu-item":"initRouter","click .portfolio-tile a":"initRouter"},initialize:function(){this.$page=a("#page"),0==this.$page.find("#content").length&&this.$page.append('<div id="content"></div>'),this.$content=a("#content"),this.$portfolio=a("#portfolio"),this.listenTo(app.posts,"reset",this.refreshPage)},initRouter:function(a){a.preventDefault();var b=a.target.pathname;"undefined"==typeof b&&(b=a.currentTarget.pathname),app.router.navigate(b,{trigger:!0})},refreshPage:function(){var a=this;this.$page.fadeOut(function(){a.addPosts(),a.addPortfolioTiles()}),this.$page.fadeIn()},addPortfolioTiles:function(){this.$portfolio.remove(),app.portfolio_tiles.length>0&&(this.$page.prepend('<div id="portfolio"></div>'),this.$portfolio=a("#portfolio"),app.portfolio_tiles.each(this.portfolioTileView,this))},addPosts:function(){this.$content.html(""),app.posts.each(this.postView,this)},portfolioTileView:function(a){var b=new app.PortfolioTileView({model:a});this.$portfolio.append(b.render().el.childNodes)},postView:function(b){var c=new app.PostView({model:b});"portfolio-item"==c.model.get("type")?(console.log("success"),c=new app.PortfolioItemView({model:b}),this.$page.append(c.render().el)):(a("#portfolio-item-content").length>0&&a("#portfolio-item-content").remove(),this.$content.append(c.render().el.childNodes))}})}(jQuery);var app=app||{};!function(a){"use strict";app.PortfolioItemView=Backbone.View.extend({id:"portfolio-item-content",template:wp.template("portfolio-item"),render:function(){this.id="portfolio-item-"+this.model.get("id");var b=this.model.get("featured_image").source,c=a(window).height()-a("footer").offset().top;return this.$el.html(this.template(this.model.toJSON())).css("background-image","url('"+b+"')"),this.$el.find("article").css("margin-top",c-175),a(window).off("scroll").on("scroll",function(){enable_mini_menu(),portfolio_parallax.call(this,"url("+b+")",c)}),this}})}(jQuery);var app=app||{};!function(){"use strict";app.PortfolioTileView=Backbone.View.extend({template:wp.template("portfolio-tile"),render:function(){return this.id="portfolio-"+this.model.get("id"),this.$el.html(this.template(this.model.toJSON())),this}})}(jQuery);var app=app||{};!function(){"use strict";app.PostView=Backbone.View.extend({template:wp.template("post"),render:function(){return this.id="post-"+this.model.get("id"),"page"==this.model.get("type")&&(this.template=wp.template("page")),"Portfolio"==this.model.get("title")&&(this.template=wp.template("portfolio-page")),this.$el.html(this.template(this.model.toJSON())),this}})}(jQuery);var app=app||{};!function(){"use strict";var a=Backbone.Collection.extend({model:app.Portfolio});app.portfolio_tiles=new a}();var app=app||{};!function(){"use strict";var a=Backbone.Collection.extend({model:app.Post});app.posts=new a}();var app=app||{};!function(){"use strict";var a=Backbone.Router.extend({routes:{"portfolio/":"portfolio","blog/":"posts","":"posts","*notFound":"single_post"},portfolio:function(){var a="/wp-content/themes/jesseoverright/portfolio-items-json.php";app.portfolio_tiles.url=a,app.portfolio_tiles.fetch({reset:!0}),app.posts.url="/wp-json/pages/?filter[pagename]=portfolio",app.posts.fetch({reset:!0})},posts:function(){var a="/wp-json/posts/?type=post";app.posts.url=a,app.posts.fetch({reset:!0,success:function(){app.portfolio_tiles.reset()}})},single_post:function(a){var b="/";_.isNull(a)||(b+=a),app.posts.url=b+"?render-as-json=true",app.posts.fetch({reset:!0,success:function(){app.portfolio_tiles.reset()}})}});app.router=new a,Backbone.history.start({pushState:!0,silent:!0})}();var app=app||{};jQuery(function(){"use strict";new app.View}),function(){function a(){}function b(a,b){this.path=a,"undefined"!=typeof b&&null!==b?(this.at_2x_path=b,this.perform_check=!1):(this.at_2x_path=a.replace(/\.\w+$/,function(a){return"@2x"+a}),this.perform_check=!0)}function c(a){this.el=a,this.path=new b(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var c=this;this.path.check_2x_variant(function(a){a&&c.swap()})}var d="undefined"==typeof exports?window:exports,e={check_mime_type:!0};d.Retina=a,a.configure=function(a){null==a&&(a={});for(var b in a)e[b]=a[b]},a.init=function(a){null==a&&(a=d);var b=a.onload||new Function;a.onload=function(){var a,d,e=document.getElementsByTagName("img"),f=[];for(a=0;a<e.length;a++)d=e[a],f.push(new c(d));b()}},a.isRetina=function(){var a="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";return d.devicePixelRatio>1?!0:d.matchMedia&&d.matchMedia(a).matches?!0:!1},d.RetinaImagePath=b,b.confirmed_paths=[],b.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},b.prototype.check_2x_variant=function(a){var c,d=this;return this.is_external()?a(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in b.confirmed_paths?a(!0):(c=new XMLHttpRequest,c.open("HEAD",this.at_2x_path),c.onreadystatechange=function(){if(4!=c.readyState)return a(!1);if(c.status>=200&&c.status<=399){if(e.check_mime_type){var f=c.getResponseHeader("Content-Type");if(null==f||!f.match(/^image/i))return a(!1)}return b.confirmed_paths.push(d.at_2x_path),a(!0)}return a(!1)},c.send(),void 0):a(!0)},d.RetinaImage=c,c.prototype.swap=function(a){function b(){c.el.complete?(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight),c.el.setAttribute("src",a)):setTimeout(b,5)}"undefined"==typeof a&&(a=this.path.at_2x_path);var c=this;b()},a.isRetina()&&a.init(d)}(),jQuery(document).ready(function(){var a=jQuery("#portfolio-item-content").css("background-image"),b=jQuery(window).height()-jQuery("#page").offset().top;jQuery("#portfolio-item-content article").css("margin-top",b-175),jQuery(window).scroll(function(){enable_mini_menu(),portfolio_parallax.call(this,a,b)})});